<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Processus</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex flex-col min-h-screen bg-gray-50 text-gray-800">

  <!-- Header banniÃ¨re en background -->
  <header class="w-full h-40 bg-center bg-cover" style="background-image: url('BanniÃ¨re-LinkedIn.png');"></header>

  <div class="flex flex-1 min-h-0">
    <!-- Sidebar minimaliste -->
    <aside class="flex flex-col items-center justify-between w-20 bg-gray-100 py-6 border-r border-gray-200">
      <div class="flex flex-col items-center gap-8">
        <!-- Home -->
        <button onclick="filterBy('all')" class="group" title="Tous les processus">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9M4 10v10a1 1 0 001 1h3a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1h3a1 1 0 001-1V10"/>
          </svg>
        </button>
        <!-- CatÃ©gories -->
        <button onclick="filterBy('Communication')" class="group" title="Communication">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
            class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z" />
          </svg>
          
        </button>
        <button onclick="filterBy('Industry')" class="group" title="Industry">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <rect x="3" y="13" width="18" height="8" rx="2"/>
            <rect x="7" y="9" width="4" height="4"/>
            <rect x="13" y="5" width="4" height="8"/>
          </svg>
        </button>
        <button onclick="filterBy('Legal')" class="group" title="Legal">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <rect x="5" y="4" width="14" height="16" rx="2"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 8h6M9 12h6M9 16h2"/>
          </svg>
        </button>
        <button onclick="filterBy('Logistique')" class="group" title="Logistique">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <rect x="3" y="7" width="18" height="13" rx="2"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M16 3v4M8 3v4"/>
          </svg>
        </button>
        <button onclick="filterBy('Quality')" class="group" title="Quality">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4"/>
          </svg>
        </button>
        <button onclick="filterBy('Finance')" class="group" title="Finance">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <rect x="3" y="5" width="18" height="14" rx="2"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M16 3v4M8 3v4"/>
          </svg>
        </button>
        <button onclick="filterBy('Achats')" class="group" title="Achats">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <rect x="4" y="4" width="16" height="16" rx="2"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 9h6M9 15h6"/>
          </svg>
        </button>
        <button onclick="filterBy('IT')" class="group" title="IT">
          <svg class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <rect x="3" y="7" width="18" height="13" rx="2"/>
            <circle cx="12" cy="12" r="2"/>
          </svg>
        </button>
        <button onclick="filterBy('SÃ©curitÃ©')" class="group" title="SÃ©curitÃ©">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" 
               class="w-8 h-8 text-gray-400 group-hover:text-cyan-500 transition">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z" />
          </svg>
        </button>
      </div>
      <div class="flex flex-col items-center gap-8">
        <div class="w-full border-t border-gray-200"></div>
        <a href="https://github.com/shay971/processusV2/upload/main/zips" target="_blank" class="group" title="Ajouter un processus">
          <svg class="w-10 h-10 text-cyan-500 group-hover:text-blue-600 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v8M8 12h8"/>
          </svg>
        </a>
      </div>
    </aside>
    <!-- Main -->
    <main class="flex-1 flex flex-col items-center justify-start py-10 px-4">
      <div class="w-full max-w-5xl mx-auto">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight">PROCESSUS</h1>
            <p class="text-gray-500 text-sm">Gestion et visualisation des processus</p>
          </div>
          <label class="inline-flex items-center cursor-pointer select-none">
            <input type="checkbox" id="admin-toggle" class="sr-only peer">
            <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full after:duration-200"></div>
            <span class="ms-3 text-sm font-medium text-gray-900">Mode admin</span>
          </label>
        </div>
        <div class="bg-white rounded-2xl shadow p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9"/></svg>
              <span class="text-gray-700 font-medium">Liste des processus</span>
              <span id="process-count" class="ml-2 text-gray-400 text-sm"></span>
            </div>
            <button id="reset-filter" onclick="filterBy('all')" class="px-3 py-1 rounded-full bg-gray-100 hover:bg-blue-50 text-gray-600 text-xs font-medium shadow transition hidden">RÃ©initialiser</button>
          </div>
          <div class="flex items-center w-full max-w-xl rounded-full border border-gray-200 px-4 py-2 shadow-sm bg-gray-50 mb-6">
            <input type="text" id="search" placeholder="Rechercher un processus, un dossier ..." class="flex-grow outline-none text-gray-700 placeholder-gray-500 bg-transparent" />
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M17 11a6 6 0 11-12 0 6 6 0 0112 0z" />
            </svg>
          </div>
          <ul id="processus-list" class="divide-y divide-gray-100"></ul>
        </div>
      </div>
    </main>
    </div>
    <script>
    let processus = [];
    let currentFilter = null;
    let currentSearch = '';

    // RÃ©cupÃ©rer le JSON
    async function fetchProcessus() {
      try {
        const res = await fetch('./processus.json');
        processus = await res.json();
        renderCategories();
        renderList();
      } catch (e) {
        console.error("Erreur lors du chargement des processus:", e);
      }
    }

    // RÃ©cupÃ©rer toutes les catÃ©gories dynamiquement
    function getCategories() {
      const cats = new Set();
      processus.forEach(p => cats.add(p.category));
      return Array.from(cats).sort();
    }

    // Afficher la sidebar des catÃ©gories
    function renderCategories() {
      const categoryList = document.getElementById('category-list');
      categoryList.innerHTML = '';

      const liAll = document.createElement('li');
      liAll.textContent = 'ðŸ  Tous les processus';
      liAll.className = 'cursor-pointer hover:text-blue-600 font-semibold';
      liAll.onclick = () => {
        currentFilter = null;
        renderList();
      };
      categoryList.appendChild(liAll);

      getCategories().forEach(cat => {
        const li = document.createElement('li');
        li.textContent = `ðŸ“ ${cat}`;
        li.className = 'cursor-pointer hover:text-blue-600';
        li.onclick = () => {
          currentFilter = cat;
          renderList();
        };
        categoryList.appendChild(li);
      });
    }

    // Afficher les processus filtrÃ©s
    function renderList() {
      const list = document.getElementById('processus-list');
      list.innerHTML = '';

      let filtered = processus;

      if (currentFilter) {
        filtered = filtered.filter(p => p.category.trim().toLowerCase() === currentFilter.trim().toLowerCase());
      }

      if (currentSearch) {
        const term = currentSearch.trim().toLowerCase();
        filtered = filtered.filter(p =>
          p.title.toLowerCase().includes(term) ||
          (p.category && p.category.toLowerCase().includes(term))
        );
      }

      if (filtered.length === 0) {
        const msg = document.createElement('div');
        msg.className = 'text-xl text-gray-500 py-10';
        msg.textContent = 'Aucun processus trouvÃ©';
        list.appendChild(msg);
        return;
      }

      filtered.forEach(({ title, link, category }, i) => {
        const li = document.createElement('li');
        li.className = 'flex items-center space-x-4 group cursor-pointer';
        li.innerHTML = `
          <span class="text-blue-400 font-extrabold text-3xl min-w-[60px] text-center group-hover:text-blue-600 transition-colors">â†’${(i + 1).toString().padStart(2,'0')}</span>
          <a href="${link}" target="_blank" class="text-blue-900 text-2xl font-semibold hover:underline transition">${title}</a>
          <span class="ml-auto text-sm text-gray-400 italic">${category}</span>
        `;
        list.appendChild(li);
      });
    }

    // Recherche
    document.getElementById('search').addEventListener('input', e => {
      currentSearch = e.target.value;
      renderList();
    });

    fetchProcessus();
  </script>
</body>
</html>